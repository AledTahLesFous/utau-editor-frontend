.DS_Store
node_modules
dist


module.exports = function registerEndpoint(router) {
  // Ajoute Ã§a **avant** router.post(...)
  router.use(require('express').json());

  router.post('/exchange-code', async (req, res) => {
    console.log('Body reÃ§u:', req.body); // ðŸ”¹ pour debug
    const { code } = req.body;

    if (!code) {
      console.error('Code GitHub manquant dans le body');
      return res.status(400).json({ error: 'Code GitHub manquant' });
    }

    console.log('Code GitHub reÃ§u dans Directus:', code);
    res.json({ receivedCode: code }); // renvoie juste pour tester
  });
};
